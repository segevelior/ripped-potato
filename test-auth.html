<!DOCTYPE html>
<html>
<head>
    <title>Test Authentication</title>
</head>
<body>
    <h1>Authentication Test</h1>
    <div>
        <button onclick="testLogin()">Test Login</button>
        <button onclick="testCreateExercise()">Test Create Exercise</button>
        <button onclick="testDeleteExercise()">Test Delete Exercise</button>
        <button onclick="testCreateGoal()">Test Create Goal</button>
        <button onclick="testUpdateGoal()">Test Update Goal</button>
    </div>
    <div id="output"></div>

    <script type="module">
        import { createClient } from './mock-sdk/index-browser.js';
        
        window.client = createClient();
        window.output = document.getElementById('output');
        
        function log(message) {
            window.output.innerHTML += '<div>' + message + '</div>';
            console.log(message);
        }
        
        window.testLogin = async () => {
            try {
                log('üîê Testing login...');
                const result = await window.client.auth.signIn('test@example.com', 'testpassword123');
                log('‚úÖ Login successful: ' + JSON.stringify(result));
            } catch (error) {
                log('‚ùå Login failed: ' + error.message);
            }
        };
        
        window.testCreateExercise = async () => {
            try {
                log('üèãÔ∏è Testing exercise creation...');
                const result = await window.client.entities.Exercise.create({
                    name: 'Test Frontend Exercise',
                    muscles: ['chest'],
                    equipment: ['dumbbell'],
                    difficulty: 'beginner',
                    discipline: ['strength'],
                    description: 'Test from frontend'
                });
                log('‚úÖ Exercise created: ' + JSON.stringify(result));
                window.lastExerciseId = result.id;
            } catch (error) {
                log('‚ùå Create exercise failed: ' + error.message);
            }
        };
        
        window.testDeleteExercise = async () => {
            try {
                if (!window.lastExerciseId) {
                    log('‚ùå No exercise ID to delete');
                    return;
                }
                log('üóëÔ∏è Testing exercise deletion...');
                const result = await window.client.entities.Exercise.delete(window.lastExerciseId);
                log('‚úÖ Exercise deleted: ' + JSON.stringify(result));
            } catch (error) {
                log('‚ùå Delete exercise failed: ' + error.message);
            }
        };
        
        window.testCreateGoal = async () => {
            try {
                log('üéØ Testing goal creation...');
                const result = await window.client.entities.Goal.create({
                    name: 'Test Frontend Goal',
                    description: 'Test goal from frontend',
                    category: 'strength',
                    difficultyLevel: 'beginner',
                    estimatedWeeks: 4,
                    discipline: ['strength'],
                    milestones: [
                        {
                            title: 'Week 1',
                            description: 'Complete first week',
                            targetWeek: 1
                        }
                    ]
                });
                log('‚úÖ Goal created: ' + JSON.stringify(result));
                window.lastGoalId = result.id;
            } catch (error) {
                log('‚ùå Create goal failed: ' + error.message);
            }
        };
        
        window.testUpdateGoal = async () => {
            try {
                if (!window.lastGoalId) {
                    log('‚ùå No goal ID to update');
                    return;
                }
                log('üìù Testing goal update...');
                const result = await window.client.entities.Goal.update(window.lastGoalId, {
                    name: 'Updated Frontend Goal'
                });
                log('‚úÖ Goal updated: ' + JSON.stringify(result));
            } catch (error) {
                log('‚ùå Update goal failed: ' + error.message);
            }
        };
    </script>
</body>
</html>