<!DOCTYPE html>
<html>
<head><title>Test APIExercise Instantiation</title></head>
<body>
<h1>Testing APIExercise Class</h1>
<button onclick="testInstantiation()">Test APIExercise Instantiation</button>
<button onclick="testWithMockEntity()">Test with MockEntity (baseline)</button>
<button onclick="testMinimalAPIExercise()">Test Minimal APIExercise</button>
<div id="results" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>

<script type="module">
// Import necessary classes
import { MockEntity, createClient } from '../../mock-sdk/index-browser.js';

// Test 1: Try instantiating APIExercise as defined
window.testInstantiation = function() {
    const resultsDiv = document.getElementById('results');
    try {
        console.log('üîß Testing APIExercise instantiation...');
        
        // Copy the APIExercise class from mock-sdk
        class APIExercise {
            constructor() {
                console.log('üîß APIExercise constructor starting...');
                this.baseURL = 'http://localhost:5001/api/v1';
                this.entityName = 'Exercise';
                console.log('üîß APIExercise constructor completed successfully');
            }
            
            async list() {
                return [];
            }
        }
        
        console.log('üìç About to create APIExercise instance...');
        const exercise = new APIExercise();
        console.log('‚úÖ APIExercise instantiated:', exercise);
        
        resultsDiv.innerHTML = '<h3 style="color: green;">‚úÖ APIExercise instantiation SUCCESS!</h3>';
    } catch (error) {
        console.error('‚ùå APIExercise instantiation failed:', error);
        resultsDiv.innerHTML = `<h3 style="color: red;">‚ùå APIExercise instantiation FAILED</h3><p>${error.message}</p>`;
    }
};

// Test 2: MockEntity baseline
window.testWithMockEntity = function() {
    const resultsDiv = document.getElementById('results');
    try {
        console.log('üîß Testing MockEntity instantiation...');
        const exercise = new MockEntity('Exercise');
        console.log('‚úÖ MockEntity instantiated:', exercise);
        resultsDiv.innerHTML = '<h3 style="color: green;">‚úÖ MockEntity instantiation SUCCESS!</h3>';
    } catch (error) {
        console.error('‚ùå MockEntity instantiation failed:', error);
        resultsDiv.innerHTML = `<h3 style="color: red;">‚ùå MockEntity instantiation FAILED</h3><p>${error.message}</p>`;
    }
};

// Test 3: Minimal APIExercise
window.testMinimalAPIExercise = function() {
    const resultsDiv = document.getElementById('results');
    try {
        console.log('üîß Testing minimal APIExercise...');
        
        // Super minimal class
        class MinimalAPIExercise {
            constructor() {
                console.log('Minimal constructor called');
            }
        }
        
        const exercise = new MinimalAPIExercise();
        console.log('‚úÖ Minimal APIExercise instantiated:', exercise);
        
        resultsDiv.innerHTML = '<h3 style="color: green;">‚úÖ Minimal APIExercise SUCCESS!</h3>';
    } catch (error) {
        console.error('‚ùå Minimal APIExercise failed:', error);
        resultsDiv.innerHTML = `<h3 style="color: red;">‚ùå Minimal APIExercise FAILED</h3><p>${error.message}</p>`;
    }
};
</script>
</body>
</html>